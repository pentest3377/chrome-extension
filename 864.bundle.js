"use strict";(self.webpackChunktab_nodes_tree_extension=self.webpackChunktab_nodes_tree_extension||[]).push([[864],{3022:(e,t,n)=>{n.d(t,{Di:()=>i,F1:()=>s,T8:()=>l,TX:()=>f,We:()=>u,my:()=>a,o3:()=>o,o7:()=>c,ru:()=>d,vJ:()=>r});let r={grey:{color:"#dadce0",textColor:"#000"},blue:{color:"#8ab4f8",textColor:"#000"},red:{color:"#f28b82",textColor:"#000"},yellow:{color:"#fdd663",textColor:"#000"},green:{color:"#81c995",textColor:"#000"},pink:{color:"#ff8bcb",textColor:"#000"},purple:{color:"#c58af9",textColor:"#000"},cyan:{color:"#78d9ec",textColor:"#000"},orange:{color:"#fcad70",textColor:"#000"}},o=e=>!(null==e?void 0:e.includes("Binance"))&&!(null==e?void 0:e.includes("TradingView")),i=100,a=15,d="chrome://newtab/",l="chrome://extensions/shortcuts",s=chrome.runtime.getURL("branch-tab-node.html"),c=chrome.runtime.getURL("options.html"),u={dragNodeId:"dragNodeId"},f=.5},37390:(e,t,n)=>{n.d(t,{Et:()=>I,GG:()=>u,Gq:()=>N,J8:()=>p,Jx:()=>f,Lp:()=>v,Pj:()=>h,RV:()=>a,SG:()=>m,SR:()=>g,Wq:()=>c,cX:()=>k,eC:()=>w,mt:()=>E,nH:()=>o,r$:()=>y,ro:()=>b,sn:()=>l,ud:()=>s,ve:()=>C,wL:()=>T,yB:()=>d,yy:()=>i}),n(79474);var r=n(93034);function o(e,t,n=!0){let r=Object.getOwnPropertyDescriptor(e,t);return r?!!r.writable:n}async function i(e){return new Promise(t=>setTimeout(t,e))}n(65640);let a=function(e){return e.LeftTop="LeftTop",e.RightTop="RightTop",e.LeftBottom="LeftBottom",e.RightBottom="RightBottom",e}({});function d(e,t,n){let o=(0,r.tZ)(!1,r.W4.script,d.name);o.gP({anchorBoundingClientRect:e,anchorPosition:t,targetElem:n});let i=parseFloat(window.getComputedStyle(n).borderWidth),l=n.clientWidth+2*i,s=n.clientHeight+2*i,c=0;t===a.RightTop||t===a.RightBottom?(c=e.right,o.logP("anchorRect right",c),c+l>window.innerWidth&&(c=window.innerWidth-l,o.logP("display targetElem to the right of the anchor exceeds the window right boundary, display targetElem align to the window right",c)),c<0&&(c=e.left,o.logP("display targetElem to the left of the anchor exceeds the window left boundary, display targetElem align to the left of the anchor.",c))):(t===a.LeftTop||t===a.LeftBottom)&&(c=e.left-l)<0&&(c=0,o.logP("display targetElem to the left of the anchor exceeds the window left boundary, display targetElem align the left of the window.",c));let u=0;return t===a.RightTop||t===a.LeftTop?u=e.top:(t===a.RightBottom||t===a.LeftBottom)&&(u=e.bottom),u+s>window.innerHeight&&(u=window.innerHeight-s,o.logP("display to the top of the anchor exceeds the window bottom boundary, instead display to align the window bottom",u),u<0&&(u=0)),o.logP({srcElemBoundingClientRect:e,elem:n,srcElemRect:e,"targetElem.clientWidth":n.clientWidth,"targetElem.clientHeight":n.clientHeight,"window.innerWidth":window.innerWidth,"window.innerHeight":window.innerHeight,left:c,top:u}),o.ge(),{left:c,top:u}}function l(e,t,n){let o=(0,r.tZ)(!1,r.W4.script,l.name);o.gP({posX:e,posY:t,el:n});let i=parseFloat(window.getComputedStyle(n).borderWidth),a=e;e+n.clientWidth>window.innerWidth&&(a=window.innerWidth-(n.clientWidth+2*i)),a<0&&(a=0);let d=t;return t+n.clientHeight>window.innerHeight&&(d=window.innerHeight-(n.clientHeight+2*i)),d<0&&(d=0),o.logP({posX:e,posY:t,left:a,top:d}),o.ge(),{left:a,top:d}}function s(){return window.matchMedia&&window.matchMedia("(prefers-color-scheme: dark)").matches}function c(e,t={block:"center",inline:"nearest",behavior:"smooth"}){let n=(0,r.tZ)(!1,r.W4.script,c.name);if(!e){n.errorP("element is not defined");return}let o=null==e?void 0:e.getBoundingClientRect();n.logP({element:e,elementDatasetTransitionState:null==e?void 0:e.dataset.transitionState,windowInnerHeight:window.innerHeight,windowOuterHeight:window.outerHeight,elementTop:null==o?void 0:o.top,elementBottom:null==o?void 0:o.bottom,elementHeight:null==o?void 0:o.height,elementWidth:null==o?void 0:o.width}),e&&o&&(o.bottom>window.innerHeight||o.top<o.height)?(n.logP(`scroll into view because condition met: elementBottom: ${o.bottom} > windowInnerHeight: ${window.innerHeight} || elementTop: ${o.top} < elementHeight: ${o.height}`),null==e||e.scrollIntoView(t)):n.logP("No need to scroll into view.")}function u(e,t){return Object.values(t).includes(e)}function f(e,t,n){let o=(0,r.tZ)(!0,r.W4.script,f.name);o.gcP("Check data",{defaultData:(0,r.mm)(e),currentData:(0,r.mm)(t)}),Object.isFrozen(t)&&(o.log("currentData is frozen. Clone it."),t=structuredClone(t));let i=function e(t,n,o){let i=(0,r.tZ)(!0,r.W4.script,e.name);if("object"!=typeof t||null===t)return i.return("defaultData is not object or null. Return it."),t;if("object"!=typeof n||null===n)return i.return("currentData is not object or null. Return it."),t;let a=Object.assign({},t);for(let t in i.gcP("Compare two data.",{path:o,defaultDataClone:(0,r.mm)(a),currentData:(0,r.mm)(n)}),n){let r=o?`${o}.${t}`:t,d="default",l="current";i.search("Check data with key.",{path:r,[`${d}`]:a[t],[`${l}`]:n[t]}),n.hasOwnProperty(t)&&(a.hasOwnProperty(t)?"object"==typeof a[t]&&"object"==typeof n[t]?Array.isArray(a[t])&&!Array.isArray(n[t])?(i.update(`${d} is an array, but ${l} is not. Replace old data with new data.`),n[t]=a[t]):!Array.isArray(a[t])&&Array.isArray(n[t])?(i.update(`${d} is an object but ${l} is an array. Replace old data with new data.`),n[t]=a[t]):Array.isArray(a[t])&&Array.isArray(n[t])?i.success(`${d} and ${l} both are array. No need to process.`):(i.deep(`${d} and ${l} are object. Recursively check it.`),n[t]=e(a[t],n[t],r)):void 0===a[t]||null===a[t]?i.skip(`${d} is either undefined or null. Skip it.`):typeof n[t]!=typeof a[t]?(i.update(`${d} and ${l} are different type. Replace old data with new data.`),n[t]=a[t]):i.success(`${d} and ${l} are the same data type.`):(i.bin(`${d} === undefined, but ${l} has it. Remove it.`),delete n[t])),delete a[t]}for(let e in i.ge(),i.g(`Check missing properties. There are ${Object.keys(a).length} properties could be missing.`,{defaultDataClone:a}),a){let t=o?`${o}.${e}`:e,r="current";i.search("Check data with key.",{path:t,default:a[e],[`${r}`]:n[e]}),a.hasOwnProperty(e)&&!n.hasOwnProperty(e)&&void 0!==a[e]&&(i.update(`${r} is missing. Fill it.`),n[e]=a[e])}return i.ge(),n}(e,t,n);return o.ge(),i}function h(e,t,n){if(t<0||t>=e.length||n<0||n>=e.length)throw Error("Invalid index");let r=[...e],[o]=r.splice(t,1);return r.splice(n,0,o),r}function g(){return"object"==typeof self&&self.constructor&&"ServiceWorkerGlobalScope"===self.constructor.name}function p(e,t,n,r,o){return b(e,t,n.map(e=>e[r]),r,o)}function b(e,t,n,r,o){let i=new Set(n);return e.filter(e=>{var n,a;return"include"===t?i.has(e[r])&&(null===(n=null==o?void 0:o(e))||void 0===n||n):!i.has(e[r])&&!(null==o?void 0:o(e))})}function m(){var e;let t;try{t=window.location}catch(e){}try{t||(t=location)}catch(e){}if(t){let n=null===(e=t.pathname)||void 0===e?void 0:e.split(".");if(n.length>0){let e=n[0].replace("/","");return"background"===e?"SW":e}}return""}function y(e,t,n){let{ifPrint:o=!1,printType:i="unequal",ifPrintComparingDetails:a=!1,logTags:d=[]}=null!=n?n:{},l=(0,r.tZ)(o,r.W4.script,[...w(d),y.name]),s=N(e,t,{log:{ifPrint:a,tags:d},stopOnFirstDifference:!0});return Object.keys(s).length>0?l.failureP("Not equal.",{obj1:e,obj2:t,differences:s}):"equalAndUnequal"===i&&l.successP("Are equal.",{obj1:e,obj2:t}),0===Object.keys(s).length}function N(e,t,n){let{log:o={ifPrint:!1,tags:[]},stopOnFirstDifference:i=!1}=null!=n?n:{},{ifPrint:a,tags:d}=o,l=Array.isArray(d)?d:[d],s=(0,r.tZ)(a,r.W4.script,[...l,N.name]);s.gP({obj1:e,obj2:t});let c=function e(t,n,r){let{logger:o,stopOnFirstDifference:i=!1}=r,a={};if(Array.isArray(t)&&Array.isArray(n)){o.loop("Both are arrays. Loop through each element to compare.");for(let d=0;d<t.length;d++)if(d<n.length){o.g(`Compare array1[${d}] and array2[${d}]`,{index:d,[`array1[${d}]`]:t[d],[`array2[${d}]`]:n[d]});let l=e(t[d],n[d],r);if(o.ge(),0!==Object.keys(l).length&&(a[d.toString()]=l,i))return a}else if(o.check(`array1[${d}] is not in array2[${d}]`,{index:d,[`array1[${d}]`]:t[d],[`array2[${d}]`]:n[d]}),a[d.toString()]=[t[d],void 0],i)return a;for(let e=t.length;e<n.length&&(o.check(`array2[${e}] element is not in array1[${e}]`,{index:e,[`array1[${e}]`]:t[e],[`array2[${e}]`]:n[e]}),a[e.toString()]=[void 0,n[e]],!i);e++);}else if(Array.isArray(t)&&!Array.isArray(n))return o.check("obj1 is an array, but obj2 is not"),[t,n];else if(!Array.isArray(t)&&Array.isArray(n))return o.check("obj1 is not an array, but obj2 is"),[t,n];else if("object"!=typeof t||"object"!=typeof n)t!==n&&(o.check("Either obj1 or obj2 is not an object.",{obj1Type:typeof t,obj2Type:typeof n}),a={obj1:t,obj2:n});else{for(let d in t)if(d in n){if("object"==typeof t[d]&&null!==t[d]){o.g(`Check obj1[${d}] and obj2[${d}]`,{[`obj1[${d}]`]:t[d],[`obj2[${d}]`]:n[d]});let l=e(t[d],n[d],r);if(o.ge(),0!==Object.keys(l).length&&(a[d]=l,i))return a}else if(t[d]!==n[d]&&(o.check(`obj1[${d}] !== obj2[${d}]`,{[`obj1[${d}]`]:t[d],[`obj2[${d}]`]:n[d]}),a[d]=[t[d],n[d]],i))return a}else if(o.check(`key:${d} is not in obj2`,{[`obj1[${d}]`]:t[d],[`obj2[${d}]`]:n[d]}),a[d]=[{[d]:t[d]},void 0],i)return a;for(let e in n)if(!(e in t)&&(o.check(`key:${e} is not in obj1`,{[`obj1[${e}]`]:t[e],[`obj2[${e}]`]:n[e]}),a[e]=[void 0,{[e]:n[e]}],i))break}return a}(e,t,{logger:s,stopOnFirstDifference:i});return s.ge(),c}function w(e){return e?Array.isArray(e)?e:[e]:[]}function I(e){return null!=e&&""!==e&&!isNaN(Number(e.toString()))}function v(e,t,n){let r=n,o=`${t}${r}`;for(;e.includes(o);)r=`${r}${n}`,o=`${t}${r}`;return o}function C(e,t,n){return 1===e?t:n}function T(e){var t;(t=e.attributeName,Array.from(document.querySelectorAll(`[data-${t}]`))).forEach(t=>delete t.dataset[e.key])}function $(e,t){var n,r,o;return!!navigator&&((null===(r=null===(n=null==navigator?void 0:navigator.userAgentData)||void 0===n?void 0:n.platform)||void 0===r?void 0:r.toUpperCase())===e||(null===(o=navigator.platform)||void 0===o?void 0:o.toUpperCase().includes(t)))}function k(){return $("MACOS","MAC")}function E(e){return($("WINDOWS","WIN")||$("LINUX","LINUX"))&&e.ctrlKey||k()&&e.metaKey}},83246:(e,t,n)=>{n.d(t,{FT:()=>L,Gt:()=>R,Kj:()=>j,MA:()=>W,pR:()=>S,pu:()=>x,t2:()=>k,xd:()=>B});var r=n(69173),o=n(68928),i=n.n(o),a=n(31997),d=n.n(a),l=n(60047),s=n.n(l),c=n(2530),u=n(84590),f=n(67272),h=n(43393),g=n(87521),p=n(44788),b=n(93034),m=n(54510),y=n(61566),N=n(27566),w=n(78154);n(35904);var I=n(94778),v=n(6320),C=n(37390),T=n(59721),$=n(65640);async function k(){return await E(window.location.pathname)}async function E(e,t=!1){let n;let r=(0,b.tZ)(c.A.logLicenseValidation,b.W4.script,[...(0,C.eC)(e),E.name]);r.gP("Get license data from Chrome local storage.");try{let e=await m.g.loadData();if(r.log("Encrypted license data retrieved from Chrome local storage.",{encryptedLicenseData:e}),e){let t;if(t=await (0,y.af)(e))try{n=JSON.parse(t)}catch(e){r.error("Unable to convert license data to JSON. Data might be broken.",e)}}}catch(n){let e="Failed to decrypt license data. It might be compromised.";if(await f.ga.fireExceptionEvent({from:"service worker",when:"Decrypt license data.",details:e,error:n.message}),r.error(e,n),t)throw n}finally{r.ge()}return n||(n=P(),await S(e,n)),n}function P(e){return{deviceId:null!=e?e:(0,r.Ak)(),entitlement:u.h.FREE}}async function S(e,t){let n=(0,b.tZ)(c.A.logLicenseValidation,b.W4.script,[...(0,C.eC)(e),S.name]);n.gP("Saving license. Disable listener to avoid dead loops or unexpected behavior.",t);try{await N.X7.disableListener(w.HR.SERVICE_WORKER),await N.F2.disableListener(w.x7.SERVICE_WORKER);let r=await (0,y.yv)(JSON.stringify(t));await m.g.save(r),n.log("License data encrypted and saved to Chrome storage."),await A(e,t),B(t)||(n.log("License is not pro, disable PRO features."),await x())}catch(e){n.error("Save license data error.",e)}finally{n.ge(),await N.X7.enableListener(w.HR.SERVICE_WORKER),await N.F2.enableListener(w.x7.SERVICE_WORKER)}}async function A(e,t){let n=(0,b.tZ)(c.A.logLicenseValidation,b.W4.script,[...(0,C.eC)(e),A.name]);n.gP("Notify license changes.",t);try{(0,C.SR)()||g.store.licenseCache.setLicenseCache(t),n.log("Send a message to notify pages to update license cache."),await (0,p.w)({type:"setLicenseCacheState",license:t},{logTags:e,onLogFailure:()=>n.falseP("No active listeners.")})}catch(e){n.error("Notify license changes.",e)}finally{n.ge()}}async function x(){await I.O.updateOptions(e=>{O(e)}),await (0,p.w)({type:"previewNodesTheme",previewNodesTheme:void 0})}async function O(e){let t=(0,b.tZ)(c.A.logLicenseValidation,b.W4.script,[O.name]);if(Object.isFrozen(e))return t.errorP("Options is frozen. Cannot update."),!1;let n=!1;return e.themeSettings.customizedTabNodesTreeThemeSettings.enabled&&(e.themeSettings.customizedTabNodesTreeThemeSettings.enabled=!1,n=!0),e.nodesTreeSettings.newTabNodePositionExternalLinkSetting!==T.qS.ChromeDefault&&(e.nodesTreeSettings.newTabNodePositionExternalLinkSetting=T.qS.ChromeDefault,n=!0),e.nodesTreeSettings.newTabNodePositionBookmarkSetting!==T.B8.ChromeDefault&&(e.nodesTreeSettings.newTabNodePositionBookmarkSetting=T.B8.ChromeDefault,n=!0),e.nodesTreeSettings.whichTabNodeToActivateAfterTabNodeClosedSettings.settingType!==v.WQ.ChromeDefault&&(e.nodesTreeSettings.whichTabNodeToActivateAfterTabNodeClosedSettings.settingType=v.WQ.ChromeDefault,n=!0),n}async function j(e,t){let n=Array.isArray(e)?e:[e],r=P(t);return await S(n,r),r}function R(e,t){return L(e,()=>{t&&f.ga.fireEvent2({name:f.U.UNEXPECTED_EVENT_WITHOUT_PRO_ENTITLEMENT,event:t}).catch($.error)})}function W(e,t){return D(e,t,()=>{window.open(`${c.A.webSitePurchaseProLicense}`,"_blank")})}function L(e,t=()=>{}){return D(u.h.PRO,e,t)}function D(e,t,n=()=>{}){return e!==u.h.PRO||g.store.licenseCache.isValidProEntitlement?t:n}function B(e){var t;let n;return t=u.h.PRO,n=!1,t===u.h.PRO&&e.entitlement===u.h.PRO&&(n=!0),n&&!!e.status&&[h.UI.ACTIVE,h.UI.EXPIRING].includes(e.status)}i().extend(d()),i().extend(s())},24817:(e,t,n)=>{n.d(t,{CB:()=>u,C_:()=>F,Cy:()=>c,DN:()=>k,Dw:()=>_,Gu:()=>G,IB:()=>X,IC:()=>W,Id:()=>V,J9:()=>D,Js:()=>E,LD:()=>P,Op:()=>S,SQ:()=>z,SV:()=>j,Sh:()=>y,UW:()=>O,Z0:()=>m,ZO:()=>q,aL:()=>R,ae:()=>T,b7:()=>w,en:()=>I,f9:()=>L,fc:()=>f,gJ:()=>A,j7:()=>N,mI:()=>U,mc:()=>H,nJ:()=>p,pc:()=>$,q8:()=>Z,rL:()=>b,u:()=>h,uW:()=>B,um:()=>J,wX:()=>s,y7:()=>x,zv:()=>v});var r=n(2531),o=n(37390);n(2613);var i=n(3022),a=n(93034),d=n(2530),l=n(56615);function s(e){return Z(e)?`[data-tab-id='${e.id}']`:U(e)?`[data-group-id='${e.id}']`:void 0}function c(e){return Z(e)?document.querySelector(`${s(e)}`):U(e)?document.querySelector(`${s(e)}`):void 0}function u(e,t,n){let r=document.querySelector(`${s(e)} .node-content`);r&&(r.dataset[t]=n)}function f(e){return e.filter(e=>Z(e))}function h(e,t){let n=(0,a.tZ)(!1,a.W4.script);n.gt({nodes:(0,a.mm)(e)});let r=f(e);r.reduce((e,n,o,i)=>((function e(t,n,r,o){var i,d;let s=(0,a.tZ)((0,l.mR)(n,"https://www.reddit.com/r/cats/")&&!0,a.W4.script,[e.name]);s.gP("Loop above nodes until nodeIndex < 0, or found first ancestor, and include it and its ancestralNodeIds as tabNode's ancestralNodeIds",{"tabNode.title":n.title,"tabNode.index":r,tabNode:(0,a.mm)(n)});let c=r-1,u=n.ancestralNodeIds.slice(),f=()=>{s.update({from:u,to:n.ancestralNodeIds})};if(c<0)s.start(`currentNodeIndex(${c}) < 0. This means this tab node is the top node in the tree. tabNode.ancestralNodeIds should be empty. Check it.`),u.length>0?(s.check("tabNode.ancestralNodeIds is not empty. Empty it."),n.ancestralNodeIds=[],g(t,n),f()):s.false("tabNode.ancestralNodeIds is empty. Do nothing.");else{s.gls("Start to check tab node above it.");let e=!1;for(;c>=0;){let r=t[c];s.start("currentNode",{currentNodeIndex:c,"currentTabNode.title":r.title,currentTabNode:(0,a.mm)(r)});let l=r.groupId!==chrome.tabGroups.TAB_GROUP_ID_NONE,u=n.groupId!==chrome.tabGroups.TAB_GROUP_ID_NONE;if(l&&!u){e||0===n.ancestralNodeIds.length||(s.check("currentTabNode is in a group, but tabNode is not in a group, empty tabNode.ancestralNodeIds."),n.ancestralNodeIds=[],g(t,n),f()),s.stop("End.");break}if(!l&&u){e||0===n.ancestralNodeIds.length||(s.check("currentTabNode is not in a group, but tabNode is in a group, empty tabNode.ancestralNodeIds."),n.ancestralNodeIds=[],g(t,n),f()),s.stop("End.");break}if(l&&u&&r.groupId!==n.groupId){e||0===n.ancestralNodeIds.length||(s.check("currentTabNode is in a group, but tabNode is not in the same , empty tabNode.ancestralNodeIds."),n.ancestralNodeIds=[],g(t,n),f()),s.stop("End.");break}if(!e){let a=n.ancestralNodeIds.includes(null!==(i=r.previousTabId)&&void 0!==i?i:-1);if(r.id&&n.ancestralNodeIds.includes(r.id)||a){let i=n.ancestralNodeIds[0]!==r.id;a?s.check("currentTabNode is an ancestor of tabNode by its previousTabId. Check if tabNode is first child and promoteFirstChildAsParentOnParentClose setting.",{promoteFirstChildAsParentOnParentClose:o}):s.check("currentTabNode is an ancestor of tabNode. Check if tabNode is first child and promoteFirstChildAsParentOnParentClose setting.",{promoteFirstChildAsParentOnParentClose:o});let d=!1;if(o){s.check("promoteFirstChildAsParentOnParentClose is true, check if the first tab node below currentTabNode is new child node.");let e=c+1;if(e!==n.index&&e<t.length){let o=t[e];A(o)<A(n)&&o.ancestralNodeIds.includes(r.id)&&(n.ancestralNodeIds=[o.id,...o.ancestralNodeIds],d=!0)}}if(d||(n.ancestralNodeIds=[r.id,...r.ancestralNodeIds]),i&&g(t,n),f(),!o){s.stop("End.");break}e=!0}}if((r.directChildrenNodeIds.includes(n.id)||r.directChildrenNodeIds.includes(null!==(d=n.previousTabId)&&void 0!==d?d:-1))&&n.ancestralNodeIds[0]!==r.id){s.check("currentTabNode is the direct parent of tabNode, but not in tabNode.ancestralNodeIds. Update tabNode.ancestralNodeIds with currentTabNode and its ancestralNodeIds."),n.ancestralNodeIds=[r.id,...r.ancestralNodeIds],f(),s.stop("End.");break}if(0===r.ancestralNodeIds.length){e||!(n.ancestralNodeIds.length>0)||n.ancestralNodeIds.includes(r.id)||(s.check("'currentTabNode is at root level, but it is not in tabNode.ancestralNodeIds. All tab node's ancestors are gone. Empty tabNode.ancestralNodeIds'"),n.ancestralNodeIds=[],g(t,n),f()),s.stop("Reach first root level currentTabNode. End.");break}--c<0&&(e||(s.check(`nodeIndex(${c}) < 0, could not find any the parent. Empty "tabNode.ancestralNodeIds".`),n.ancestralNodeIds=[],f()),s.stop("End."))}s.ge()}s.end("fixTabNodeMissingAncestors complete"),s.ge()})(r,n,o,t),e),e),n.ge()}function g(e,t){let n=(0,a.tZ)(!1,a.W4.script,g.name);if(n.gP(),n.search(`Check if tabNode is collapsed, we have to expand it: ${t.areChildrenExpanded?" and all it descendants":""}, otherwise there will be no way to do it since parent is missing.`),t.isExpanded){n.false("tabNode is already expanded. Do nothing.");return}n.check("tabNode is collapsed. Expand it."),t.isExpanded=!0,n.update("tabNode and its updated to collapsed."),function e(t,n,r){(0,a.tZ)(!1,a.W4.script,e.name).log(`${t?"Expand":"Collapse"} tabNode descendants.`),r.areChildrenExpanded=t,n.filter(e=>e.ancestralNodeIds.includes(r.id)).forEach(e=>{e.isExpanded=t})}(t.areChildrenExpanded,e,t),n.ge()}function p(e){return e.index+e.descendantNodesCount+1}function b(e,t){let n=e.index+1;for(;n<t.length;){let r=C(n,t);if(!r||A(r)<=A(e))break;n++}return n}function m(e,t){let n=e.index+1;for(;n<t.length;){let e=C(n,t);if(!e||0===A(e))break;n++}return n}function y(e,t,n=!1){let r=e.findIndex(e=>e.id===t);if(-1!==r){let t=e[r];return -1!==r&&n&&e.splice(r,1),t}}function N(e,t,n=!1){let r=e.findIndex(e=>"groupNode"===e.nodeType&&e.id===t);if(-1!==r){let t=e[r];return n&&e.splice(r,1),t}}function w(e,t,n=!1){let r=e.findIndex(e=>Z(e)&&t(e));if(-1!==r){let t=e[r];return -1!==r&&n&&e.splice(r,1),t}}function I(e,t,n=!1){let r=e.filter(e=>Z(e)&&t(e));return r.length>0&&n&&r.forEach(t=>{let n=e.findIndex(e=>e.id===t.id);-1!==n&&e.splice(n,1)}),r}function v(e,t,n=!1){return w(t,t=>t.id===e,n)}function C(e,t,n=!1){return w(t,t=>t.index===e,n)}function T(e,t){return w(t,t=>t.id===e.openerTabId)}function $(e,t){if(0!==e.ancestralNodeIds.length)return v(e.ancestralNodeIds[0],t)}function k(e,t){return f(t).filter(t=>e.directChildrenNodeIds.includes(t.id))}function E(e,t){return f(t).filter(t=>O(t,e))}function P(e,t){return null==e?void 0:e.map(e=>{let n=structuredClone(e);return null==t||t(n),n})}function S(e,t){return d.A.disableLogger?e:P(e,t)}function A(e){return e.ancestralNodeIds.length}function x(e){return(null==e?void 0:e.groupId)!==chrome.tabGroups.TAB_GROUP_ID_NONE}function O(e,t){return e.ancestralNodeIds.includes(t.id)}function j(e,t,n,r){let o=Object.assign(Object.assign({},t),r);return void 0!==n.url&&(o.url=n.url,o.pendingUrl=void 0),o}function R(e,t){let n;let i=(0,a.tZ)(!1,a.W4.script,"updateByTabNodeSelfProperties");i.gP({updatingTabNode:e,partialProperties:t});let d=Z(e)?r.Wf:U(e)?r.WL:void 0;if(d){for(n in t){if(!d.includes(n))continue;let r=(0,o.nH)(e,n),a=Object.getOwnPropertyDescriptor(e,n);i.log({key:n,desc:a,isWritable:r}),r&&(e[n]=t[n])}i.ge()}}function W(e){return Object.assign(Object.assign({},e),{directChildrenNodeIds:[],areChildrenExpanded:!0,isExpanded:!0})}function L(e,t){return e.ancestralNodeIds.filter(e=>void 0!==v(e,t))}function D(e,t){return e.filter(e=>Z(e)&&e.groupId===t)}function B(e,t,n){let{includeAncestorNode:r}=n;return e.filter(e=>Z(e)&&(e.ancestralNodeIds.includes(t)||!!r&&e.id===t))}function H(e){var t,n;return Z(e)&&null!==(n=null===(t=e.url)||void 0===t?void 0:t.startsWith(i.F1))&&void 0!==n&&n}function _(e){return e.filter(e=>H(e))}function U(e){return(null==e?void 0:e.nodeType)==="groupNode"}function Z(e){return(null==e?void 0:e.nodeType)==="tabNode"}function F(e){return Z(e)&&e.isSelected}function G(e){return e.filter(e=>Z(e)&&e.isSelected).length>0}function V(e){return w(e,e=>e.active)}async function q(e){let t=w(e,e=>Z(e)&&e.url===i.o7);await chrome.tabs.create({url:i.T8,active:!0,openerTabId:null==t?void 0:t.id})}function J(e,t){return t.find(t=>t.id===e.directChildrenNodeIds[0])}function X(e,t){return t.findLast(t=>Z(t)&&t.groupId===e.id)}function z(e,t){return e.map(e=>{for(let n=0;n<t.length;n++)e=t[n](e);return e})}}}]);